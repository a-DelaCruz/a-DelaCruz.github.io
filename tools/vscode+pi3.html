<!DOCTYPE html>
<html lang=" en-US ">
  <head>
    <meta charset="utf-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="theme-color" content="#FFB74D" />
    <meta name="keywords" content="Raspberry Pi 3 64bit Kernel, arm64 kernel, Raspberry Pi 3B/3B+, arm64, arn64 Raspberry Pi 3, Raspberry Pi 3 arm64, .net core2, qt 5.11.2">
    <meta name="description" content="
            Been using nano editor to create a c++ app on Raspberry Pi 3. And just last month decided to use Visual Studio Code instead.Not sure if really possible at fi...
        ">

    <title>
                Using Visual Studio Code to Run and Cross-Compile a C++ App for Raspberry Pi 3
            
    </title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500">

    <!-- Favicon head tag -->
    <link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico">

    <link href="https://fonts.googleapis.com/css?family=Patrick+Hand+SC&effect=shadow-multiple" rel="stylesheet">
    <link href="/assets/css/styles.css" rel="stylesheet">

    <!-- Google fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500">

    <link href="https://fonts.googleapis.com/css?family=Mogra" rel="stylesheet">

    <!-- Syntax Highligther -->
    <link href="/assets/css/syntax.css" rel="stylesheet">

    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>

    <!-- Google Adsense -->
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({ google_ad_client: "ca-pub-6013311002995151", enable_page_level_ads: true });
        </script>
        <script async custom-element="amp-auto-ads"
            src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
        </script>
    
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Using Visual Studio Code to Run and Cross-Compile a C++ App for Raspberry Pi 3 | My Personal Notes</title>
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="Using Visual Studio Code to Run and Cross-Compile a C++ App for Raspberry Pi 3" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Been using nano editor to create a c++ app on Raspberry Pi 3. And just last month decided to use Visual Studio Code instead. Not sure if really possible at first and haven’t tried it before when i’m trying out .Net Core 2, so i search the net for clues. Primarily running on Ubuntu 18.10 this time around." />
<meta property="og:description" content="Been using nano editor to create a c++ app on Raspberry Pi 3. And just last month decided to use Visual Studio Code instead. Not sure if really possible at first and haven’t tried it before when i’m trying out .Net Core 2, so i search the net for clues. Primarily running on Ubuntu 18.10 this time around." />
<link rel="canonical" href="http://a-delacruz.github.io/tools/vscode+pi3.html" />
<meta property="og:url" content="http://a-delacruz.github.io/tools/vscode+pi3.html" />
<meta property="og:site_name" content="My Personal Notes" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-01-18T00:00:00+08:00" />
<script type="application/ld+json">
{"@type":"BlogPosting","headline":"Using Visual Studio Code to Run and Cross-Compile a C++ App for Raspberry Pi 3","dateModified":"2019-01-18T00:00:00+08:00","datePublished":"2019-01-18T00:00:00+08:00","url":"http://a-delacruz.github.io/tools/vscode+pi3.html","mainEntityOfPage":{"@type":"WebPage","@id":"http://a-delacruz.github.io/tools/vscode+pi3.html"},"description":"Been using nano editor to create a c++ app on Raspberry Pi 3. And just last month decided to use Visual Studio Code instead. Not sure if really possible at first and haven’t tried it before when i’m trying out .Net Core 2, so i search the net for clues. Primarily running on Ubuntu 18.10 this time around.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>
  
  <body id="default" class="mdc-typography"><header class="header mdc-top-app-bar mdc-top-app-bar--short mdc-top-app-bar--dense">
    <div class="mdc-top-app-bar__row">
        <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start">
                <a href="/"><img src="/assets/images/logo-bl.png"></a>
            </section>
            <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end my-top-app-bar-btn">
                <a href="/projects" class="mdc-button">projects</a>
                <a href="https://github.com/a-DelaCruz/a-DelaCruz.github.io" class="ink-color mdc-button">github</a>
                <a href="/about" class="mdc-button">about</a>
                <button class="hire-me mdc-button" disabled>hire me</button>
        </section>
    </div>
</header><section class="posts">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- Ad-1 -->
    <ins class="adsbygoogle"
        style="display:block"
        data-ad-client="ca-pub-6013311002995151"
        data-ad-slot="2377202477"
        data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

    <h5 class="mdc-typography--headline5 posts-title">Using Visual Studio Code to Run and Cross-Compile a C++ App for Raspberry Pi 3</h5>
    <p>Been using nano editor to create a c++ app on Raspberry Pi 3. And just last month decided to use Visual Studio Code instead.
Not sure if really possible at first and haven’t tried it before when i’m trying out .Net Core 2, so i search the net for clues.
Primarily running on Ubuntu 18.10 this time around.</p>

<p>By the end of this post… We will be able to Cross-Compile then Run our App remotely from a Raspberry Pi 3 and then display the output within the VSCode terminal.</p>

<h4 id="prerequisites">Prerequisites</h4>

<figure class="highlight"><pre><code class="language-terminal" data-lang="terminal"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="go">visual studio code for Linux
cross-toolchain - either Linaro / GNU ARM Embedded Toolchain / From ubuntu Repo
sshpass - also install this additional package</span>
</pre></td></tr></tbody></table></code></pre></figure>

<div class="my-callout my-callout-note">
    <code class="highlighter-rouge">I'm using the GNU ARM Embedded Toolchain for arm32</code>
</div>

<h4 id="installation">Installation</h4>
<p>Get the Visual Studio Code <code class="highlighter-rouge">deb</code> file from the main site.. <a href="https://code.visualstudio.com/download">https://code.visualstudio.com/download</a> and install using the code below:</p>

<figure class="highlight"><pre><code class="language-terminal" data-lang="terminal"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="go">sudo apt install ./code_1.30.1-1545156774_amd64.deb</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>For the toolchain any of the three i mention above will do and the procedure is also the same when configuring the Visual Studio Code for our purpose. Same for arm64.</p>

<figure class="highlight"><pre><code class="language-terminal" data-lang="terminal"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="go">// GNU ARM Embedded Toolchain : AArch32 target with hard float (arm-linux-gnueabihf)
wget https://developer.arm.com/-/media/Files/downloads/gnu-a/8.2-2019.01/gcc-arm-8.2-2019.01-x86_64-arm-linux-gnueabihf.tar.xz?revision=c69ea519-a965-4359-84a4-cbd440ff4130&amp;la=en

tar xvf gcc-arm-8.2-2019.01-x86_64-arm-linux-gnueabihf.tar.xz

// Or extract to your desired folder
tar xvf gcc-arm-8.2-2019.01-x86_64-arm-linux-gnueabihf.tar.xz -C desired-path</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>After Visual Studio Code installation, Run it and install these VSCode extensions…</p>

<figure class="highlight"><pre><code class="language-terminal" data-lang="terminal"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="go">c/c++
c++ intellisense
Easy C++ projects</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p><img src="/assets/images/ubuntu/vscode/vscode-extensions.jpg" alt="" class="responsive-img" style="width:320px;height:280px;" /></p>

<h4 id="vscode-configuration">VSCode Configuration</h4>
<p>Now let’s create a sample C++ App for our Raspberry Pi using the <code class="highlighter-rouge">Easy C++ projects extension</code> that we installed earlier.</p>

<p>1). First is to have our desired project folder or if none create one.</p>

<figure class="highlight"><pre><code class="language-terminal" data-lang="terminal"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="go">mkdir sample-app</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>2). Then on VSCode open our project folder</p>

<p><img src="/assets/images/ubuntu/vscode/vscode-1.jpg" alt="" class="responsive-img" style="height:240px;" /></p>

<p>3). Press <code class="highlighter-rouge">Ctrl+Shift+P</code> and type <code class="highlighter-rouge">easy</code>. Then select Create new C++ project</p>

<p><img src="/assets/images/ubuntu/vscode/vscode-easy.jpg" alt="" class="responsive-img" /></p>

<p>3). Then select <code class="highlighter-rouge">[G++/GDB] Linux</code></p>

<p><img src="/assets/images/ubuntu/vscode/vscode-easy2.jpg" alt="" class="responsive-img" /></p>

<p>4). We will then modify some auto-generated files… <code class="highlighter-rouge">launch.json, task.json, Makefile</code></p>

<figure class="highlight"><pre><code class="language-terminal" data-lang="terminal"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="go">// Makefile
// edit this line with
CXX := g++  to  CXX   := arm-linux-gnueabihf-g++
EXECUTABLE  := main  to  EXECUTABLE := app  // or any name for your application</span>
</pre></td></tr></tbody></table></code></pre></figure>

<figure class="highlight"><pre><code class="language-terminal" data-lang="terminal"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="go">// launch.json
// edit this line with
"miDebuggerPath": "/usr/bin/gdb"  to  "miDebuggerPath": "/file-path/gcc-arm-8.2-2019.01-x86_64-arm-linux-gnueabihf/bin/arm-linux-gnueabihf-gdb"</span>
</pre></td></tr></tbody></table></code></pre></figure>

<div class="my-callout my-callout-note">
    <code class="highlighter-rouge">10/16/19 - Updated to run with sudo priveleged. Take note on these line#: 41 &amp; 42</code>
</div>

<figure class="highlight"><pre><code class="language-terminal" data-lang="terminal"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
</pre></td><td class="code"><pre><span class="go">// task.json
// edit this line with
{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Build C++ project",
            "type": "shell",
            "command": "make",
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "presentation": {
                "panel": "dedicated",
                "clear": true
            }         
        },
        {
            "label": "Build &amp; run C++ project",
            "dependsOn": [
                "Build C++ project"
            ],
            "type": "shell",
            "command": "sshpass",
            "args": [
                "-p",
                "pi",
                "rsync",
                "-avzP",
                "./bin/*",
                "pi@raspberrypi.local:~/",
                "&amp;&amp;",
                "echo",
                "&amp;&amp;",
                "sshpass",
                "-p",
                "pi",
                "ssh",
                "pi@raspberrypi.local",
                "sudo",
                "'/home/pi/app'"
            ],
            "group": {
                "kind": "test",
                "isDefault": true
            },
            "presentation": {
                "clear": true
            }  
        }
    ]
}</span>
</pre></td></tr></tbody></table></code></pre></figure>

<div class="my-callout my-callout-note">
    <code class="highlighter-rouge">What the above lines do is compile, upload, then remotely run the app in exact order</code>
</div>

<p>5). Near the lower right corner of VSCode window, Click on the word <code class="highlighter-rouge">linux</code> and select <code class="highlighter-rouge">Edit Configurations...</code>. A new json file will be added <code class="highlighter-rouge">c_cpp_properties.json</code>.</p>

<p><img src="/assets/images/ubuntu/vscode/vscode-easy3.jpg" alt="" class="responsive-img" style="width:420px;height:380px;" /></p>

<p>6). Edit <code class="highlighter-rouge">c_cpp_properties.json</code></p>

<figure class="highlight"><pre><code class="language-terminal" data-lang="terminal"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="go">// c_cpp_properties.json
// edit this line with
"compilerPath": "/usr/bin/gcc"  to  "compilerPath": "/file-path/gcc-arm-8.2-2019.01-x86_64-arm-linux-gnueabihf/bin/arm-linux-gnueabihf-g++"</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>7). Press the <code class="highlighter-rouge">Build &amp; Run</code> button on the lower left corner of the VSCode window… or press <code class="highlighter-rouge">F7</code> and the result will be printed out on the <code class="highlighter-rouge">vscode integrated terminal</code>…</p>
<div class="my-callout my-callout-note">
    <code class="highlighter-rouge">Make sure that you are able to ssh into the Pi before running an app or you'll encounter a connection error</code>
</div>

<p><img src="/assets/images/ubuntu/vscode/vscode-easy4.jpg" alt="" class="responsive-img" style="width:420px;height:380px;" />
<img src="/assets/images/ubuntu/vscode/vscode-easy5.jpg" alt="" class="responsive-img" /></p>

    <hr />
    <!-- COMMENTS START -->
    <div id="hyvor-talk-view"></div>
    <script type="text/javascript">
        var HYVOR_TALK_WEBSITE = 274; // DO NOT CHANGE THIS
        var HYVOR_TALK_CONFIG = {
            url: false,
            id: false,
            loadMode: 'scroll'
        };
    </script>
    <script async type="text/javascript" src="//talk.hyvor.com/web-api/embed"></script>
    <!-- COMMENTS END -->
</section>
<!-- Google Analytics -->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-99256627-1', 'auto');
    ga('send', 'pageview');
</script>
</body>
</html>