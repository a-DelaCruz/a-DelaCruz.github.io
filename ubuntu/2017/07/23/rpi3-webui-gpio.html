<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>My Notes on Single Board Computer by </title>
    <link rel="stylesheet" href="/a-DelaCruz.github.io/assets/css/style.css?v=">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  
  <body>
    <div class="wrapper">
      <header>
        <img src="/assets/img/AJ.png"/>
        <h1>My Notes on Single Board Computer</h1>
        <p>Raspberry Pi 3 - 64-Bit kernel and arm64 rootfs
</p>

        

        

        
      </header>
      <section>

      
<div class="top-nav">
  	<nav>
        		<li><a href="/" >Home</a></li>       
	</nav>
</div>
	



<div class="post-org">

	<h2>Simple GPIO OUTP WebUI on .Net Core and Bootstrap [part1]</h2>	
	<p class="meta">23 Jul 2017</p>

	<div class="post">
	  <p>From my previous posts… we can now  use .Net Core properly for our Web App. This time we’ll be creating a <code class="highlighter-rouge">simple WebUI</code> that set our <code class="highlighter-rouge">GPIO OUTP</code> to either <code class="highlighter-rouge">HIGH or LOW</code>. 
For <code class="highlighter-rouge">real-time function of GPIO INPT</code>, i’m eyeing to an additional framework for that later. 
Unlike on a .Net Core consoleapp that we dedicate a set of time to detect an INPT state, for Web App, i have no idea if that is the same case.</p>

<p>Earlier i modified codes from my previous <a href="../../07/01/rpi3-docker-gpio-4">post</a> again… to remove Mono directives to just using .Net Core. Up until now, what i have accomplished so far are:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>GPIO mode: INPT/OUTP
OUTP state: HIGH/LOW
</code></pre>
</div>

<p>Now to start… let’s create a <code class="highlighter-rouge">new empty dotnet Web App</code>. And modify some created files with a few codes. I prefer to start from scratch and slowly add files that i need. If you want, you can use the <code class="highlighter-rouge">mvc template</code>.</p>
<div class="highlighter-rouge"><pre class="highlight"><code>dotnet new web -n RPi3.WebUI
</code></pre>
</div>

<h4 id="rpi3webuicsproj">RPi3.WebUI.csproj:</h4>
<p>Once you modified <code class="highlighter-rouge">RPi3.WebUI.csproj</code> file to like below, run <code class="highlighter-rouge">dotnet restore</code> afterwards.
I’ve set <code class="highlighter-rouge">RuntimeIdentifiers</code> to <code class="highlighter-rouge">linux-arm</code> so it can be run to any linux arm32 OS that use glibc.</p>
<div class="highlighter-rouge"><pre class="highlight"><code>&lt;Project Sdk="Microsoft.NET.Sdk.Web"&gt;

  &lt;PropertyGroup&gt;
    &lt;TargetFramework&gt;netcoreapp2.0&lt;/TargetFramework&gt;
    &lt;RuntimeIdentifiers&gt;linux-arm&lt;/RuntimeIdentifiers&gt;
  &lt;/PropertyGroup&gt;
  &lt;ItemGroup&gt;
    &lt;Folder Include="wwwroot\" /&gt;
  &lt;/ItemGroup&gt;

  &lt;ItemGroup&gt;
    &lt;PackageReference Include="Microsoft.AspNetCore.All" Version="2.0.0-preview2-final" /&gt;
  &lt;/ItemGroup&gt;

&lt;/Project&gt;
</code></pre>
</div>

<h4 id="startupcs">Startup.cs:</h4>
<div class="highlighter-rouge"><pre class="highlight"><code>public void ConfigureServices(IServiceCollection services)
{
    services.AddMvc();
}

// This method gets called by the runtime. Use this method to configure the HTTP request pipeline.
public void Configure(IApplicationBuilder app, IHostingEnvironment env)
{
    if (env.IsDevelopment())
    {
        app.UseDeveloperExceptionPage();
        app.UseStatusCodePages();
    }
    app.UseStaticFiles();

    app.UseMvc(routes =&gt;
    {
        routes.MapRoute(
        name: "default",
        template: "{controller=Home}/{action=Index}/{id?}");
    });
}
</code></pre>
</div>

<h4 id="programcs">Program.cs:</h4>
<div class="highlighter-rouge"><pre class="highlight"><code>public static void Main(string[] args)
        {
            BuildWebHost(args).Run();
        }

        public static IWebHost BuildWebHost(string[] args) =&gt;
            WebHost.CreateDefaultBuilder(args)
                .UseEnvironment("Development")  //Change to Production once needed
                .UseUrls("http://*:5000")       //Set to your desired port
                .UseStartup&lt;Startup&gt;()
                .Build();
</code></pre>
</div>

<h4 id="add-views">Add Views:</h4>
<p>Create several folders:</p>
<ul>
  <li>/Views</li>
  <li>/Views/Shared</li>
  <li>/Views/Home</li>
</ul>

<p>Create these files:</p>
<ul>
  <li>/Views/_ViewImports.cshtml</li>
  <li>/Views/_ViewStart.cshtml</li>
  <li>/Views/Shared/_Layout.cshtml</li>
  <li>/Views/Home/Index.cshtml</li>
</ul>

<p>And modify above files with these:</p>
<h5 id="_viewimportscshtml">_ViewImports.cshtml:</h5>
<div class="highlighter-rouge"><pre class="highlight"><code>@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
</code></pre>
</div>

<h5 id="_viewstartcshtml">_ViewStart.cshtml:</h5>
<div class="highlighter-rouge"><pre class="highlight"><code>@{
    Layout = "_Layout";
}
</code></pre>
</div>

<h5 id="_layoutcshtml">_Layout.cshtml:</h5>
<p>Codes below used on <code class="highlighter-rouge">Bottstrap 4</code>. If you don’t have a local <code class="highlighter-rouge">bootstrap</code> files at <code class="highlighter-rouge">/wwwroot</code>, use the <code class="highlighter-rouge">Bootstrap CDN</code>:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>&lt;link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous"&gt;
</code></pre>
</div>
<div class="highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;title&gt;</span>@ViewData["Title"] - testMVC<span class="nt">&lt;/title&gt;</span>

    <span class="nt">&lt;environment</span> <span class="na">include=</span><span class="s">"Development"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"~/css/bootstrap.css"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"~/css/site.css"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css"</span> <span class="na">integrity=</span><span class="s">"sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ"</span> <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/environment&gt;</span>
    <span class="nt">&lt;environment</span> <span class="na">names=</span><span class="s">"Staging,Production"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css"</span> <span class="na">integrity=</span><span class="s">"sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ"</span> <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/environment&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">"navbar navbar-toggleable-md navbar-inverse bg-success"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"navbar-toggler navbar-toggler-right"</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">data-toggle=</span><span class="s">"collapse"</span> <span class="na">data-target=</span><span class="s">"#navbarNav"</span> <span class="na">aria-controls=</span><span class="s">"navbarNav"</span> <span class="na">aria-expanded=</span><span class="s">"false"</span> <span class="na">aria-label=</span><span class="s">"Toggle navigation"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"navbar-toggler-icon"</span><span class="nt">&gt;&lt;/span&gt;</span>
        <span class="nt">&lt;/button&gt;</span>
        <span class="nt">&lt;h4</span> <span class="na">class=</span><span class="s">"navbar-brand mb-0"</span><span class="nt">&gt;</span>NavBar<span class="nt">&lt;/h4&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"collapse navbar-collapse"</span> <span class="na">id=</span><span class="s">"navbarNav"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"navbar-nav"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"nav-item nav-link active"</span> <span class="na">href=</span><span class="s">"/"</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;&lt;span</span> <span class="na">class=</span><span class="s">"sr-only"</span><span class="nt">&gt;</span>(current)<span class="nt">&lt;/span&gt;&lt;/a&gt;</span>
                <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"nav-item nav-link"</span> <span class="na">href=</span><span class="s">"/Home/About"</span><span class="nt">&gt;</span>About<span class="nt">&lt;/a&gt;</span>
                <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"nav-item nav-link"</span> <span class="na">href=</span><span class="s">"/Home/Settings"</span><span class="nt">&gt;</span>Settings<span class="nt">&lt;/a&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/nav&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container body-content"</span><span class="nt">&gt;</span>
        @RenderBody()
        <span class="nt">&lt;hr</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;footer&gt;</span>
            <span class="nt">&lt;p&gt;</span><span class="ni">&amp;copy;</span> 2017 - testMVC<span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/footer&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;environment</span> <span class="na">include=</span><span class="s">"Development"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"~/jquery/jquery-3.1.1.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"~/js/bootstrap.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"~/js/site.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;/environment&gt;</span>
    <span class="nt">&lt;environment</span> <span class="na">names=</span><span class="s">"Staging,Production"</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- jQuery library --&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://code.jquery.com/jquery-3.1.1.slim.min.js"</span> <span class="na">integrity=</span><span class="s">"sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n"</span> <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;&lt;/script&gt;</span>
            
        <span class="c">&lt;!-- Tether --&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"</span> <span class="na">integrity=</span><span class="s">"sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb"</span> <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;&lt;/script&gt;</span>
            
        <span class="c">&lt;!-- Latest compiled JavaScript --&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js"</span> <span class="na">integrity=</span><span class="s">"sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn"</span> <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;/environment&gt;</span>

    @RenderSection("Scripts", required: false)
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre>
</div>

<h5 id="indexcshtml">Index.cshtml:</h5>
<div class="highlighter-rouge"><pre class="highlight"><code>@{
    ViewData["Title"] = "Home";
}

&lt;h2&gt;Index&lt;/h2&gt;

&lt;p&gt;Hello from our View Template!&lt;/p&gt;
</code></pre>
</div>

<h4 id="add-controllers">Add Controllers:</h4>
<ul>
  <li>/Controllers</li>
  <li>/Controllers/HomeController.cs</li>
</ul>

<h5 id="homecontrollercs">HomeController.cs:</h5>
<div class="highlighter-rouge"><pre class="highlight"><code>using Microsoft.AspNetCore.Mvc;

namespace RPi3.WebUI.Controllers
{
    public class HomeController : Controller
    {
        public IActionResult Index()
        {
            return View();
        }
    }
}
</code></pre>
</div>

<p>Go ahead and run <code class="highlighter-rouge">dotnet run</code> and navigate to <code class="highlighter-rouge">http://localhost:5000</code>, so we can verify that our modification works.</p>

<hr />


	</div>

<!-- Comments -->
<div class="comments">
	
<!-- Add Disqus comments. -->
<div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'a-delacruz'; // required: replace example with your forum shortname
        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>




</div>

</div>


      </section>
      <footer>
        <p><small>Email &mdash; <a href="mailto:delacruzallanjay@gmail.com">Gmail</a></small>
        <small>Wordpress &mdash; <a href="https://cranzblog.wordpress.com">Blog</a></small></p>
      </footer>
    </div>
    <script src="/a-DelaCruz.github.io/assets/js/scale.fix.js"></script>


  
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-99256627-1', 'auto');
        ga('send', 'pageview');
    </script>
  
  </body>
</html>
